# توثيق واجهة برمجة التطبيقات للمفضلات

هذا المستند يشرح تفاصيل استخدام واجهة برمجة التطبيقات (API) المتعلقة بالمفضلات في التطبيق.

## جدول المحتويات

1. [نظرة عامة](#نظرة-عامة)
2. [عرض المنتجات المفضلة](#عرض-المنتجات-المفضلة)
3. [إضافة منتج إلى المفضلة](#إضافة-منتج-إلى-المفضلة)
4. [حذف منتج من المفضلة](#حذف-منتج-من-المفضلة)
5. [تبديل حالة المفضلة](#تبديل-حالة-المفضلة)
6. [التحقق من وجود منتج في المفضلة](#التحقق-من-وجود-منتج-في-المفضلة)

## نظرة عامة

تسمح واجهة برمجة التطبيقات للمفضلات للمستخدمين المسجلين بإدارة قائمة المنتجات المفضلة لديهم. يمكن للمستخدمين إضافة المنتجات إلى المفضلة، وحذفها، وعرض قائمة المنتجات المفضلة.

تتطلب جميع نقاط النهاية المصادقة باستخدام رمز الوصول (access token).

---

## عرض المنتجات المفضلة

عرض قائمة المنتجات المفضلة للمستخدم الحالي.

```
GET /api/favorites
```

### الاستجابة

```json
{
    "status": "success",
    "data": [
        {
            "id": 1,
            "name": "بطارية ليثيوم 12 فولت",
            "description": "بطارية ليثيوم عالية الجودة بقدرة 100 أمبير",
            "price": 1500,
            "quantity": 50,
            "type": "battery",
            "specifications": {
                "capacity": "100Ah",
                "voltage": "12V",
                "weight": "12kg"
            },
            "status": "active",
            "created_at": "2023-08-01T10:00:00.000000Z",
            "updated_at": "2023-08-01T10:00:00.000000Z",
            "primary_image": {
                "id": 1,
                "product_id": 1,
                "image_path": "products/battery1.jpg",
                "is_primary": true,
                "sort_order": 1,
                "created_at": "2023-08-01T10:00:00.000000Z",
                "updated_at": "2023-08-01T10:00:00.000000Z"
            },
            "pivot": {
                "user_id": 5,
                "product_id": 1,
                "created_at": "2023-09-01T14:30:00.000000Z",
                "updated_at": "2023-09-01T14:30:00.000000Z"
            }
        },
        {
            "id": 3,
            "name": "لوح طاقة شمسية 300 واط",
            "description": "لوح طاقة شمسية عالي الكفاءة",
            "price": 800,
            "quantity": 30,
            "type": "solar_panel",
            "specifications": {
                "power": "300W",
                "efficiency": "21%",
                "dimensions": "1640x992x35mm"
            },
            "status": "active",
            "created_at": "2023-08-01T10:30:00.000000Z",
            "updated_at": "2023-08-01T10:30:00.000000Z",
            "primary_image": {
                "id": 5,
                "product_id": 3,
                "image_path": "products/solar_panel1.jpg",
                "is_primary": true,
                "sort_order": 1,
                "created_at": "2023-08-01T10:30:00.000000Z",
                "updated_at": "2023-08-01T10:30:00.000000Z"
            },
            "pivot": {
                "user_id": 5,
                "product_id": 3,
                "created_at": "2023-09-01T14:35:00.000000Z",
                "updated_at": "2023-09-01T14:35:00.000000Z"
            }
        }
    ]
}
```

---

## إضافة منتج إلى المفضلة

إضافة منتج إلى قائمة المفضلة للمستخدم الحالي.

```
POST /api/favorites
```

### المعلمات

| المعلمة | النوع | الوصف | المطلوب |
|---------|------|-------------|----------|
| product_id | integer | معرف المنتج المراد إضافته إلى المفضلة | نعم |

### الاستجابة

```json
{
    "status": "success",
    "message": "تمت إضافة المنتج إلى المفضلة بنجاح",
    "data": {
        "id": 5,
        "name": "محول طاقة 3000 واط",
        "description": "محول طاقة عالي الأداء",
        "price": 2500,
        "quantity": 15,
        "type": "inverter",
        "specifications": {
            "power": "3000W",
            "input_voltage": "12V",
            "output_voltage": "220V"
        },
        "status": "active",
        "created_at": "2023-08-01T11:00:00.000000Z",
        "updated_at": "2023-08-01T11:00:00.000000Z",
        "primary_image": {
            "id": 9,
            "product_id": 5,
            "image_path": "products/inverter1.jpg",
            "is_primary": true,
            "sort_order": 1,
            "created_at": "2023-08-01T11:00:00.000000Z",
            "updated_at": "2023-08-01T11:00:00.000000Z"
        }
    }
}
```

### رسائل الخطأ

```json
{
    "status": "error",
    "message": "المنتج موجود بالفعل في المفضلة"
}
```

---

## حذف منتج من المفضلة

حذف منتج من قائمة المفضلة للمستخدم الحالي.

```
DELETE /api/favorites/{productId}
```

### المعلمات

| المعلمة | النوع | الوصف | المطلوب |
|---------|------|-------------|----------|
| productId | integer | معرف المنتج المراد حذفه من المفضلة | نعم (في المسار) |

### الاستجابة

```json
{
    "status": "success",
    "message": "تم حذف المنتج من المفضلة بنجاح"
}
```

### رسائل الخطأ

```json
{
    "status": "error",
    "message": "المنتج غير موجود في المفضلة"
}
```

---

## تبديل حالة المفضلة

تبديل حالة المنتج في المفضلة (إضافة إذا لم يكن موجودًا، أو حذف إذا كان موجودًا).

```
POST /api/favorites/toggle/{productId}
```

### المعلمات

| المعلمة | النوع | الوصف | المطلوب |
|---------|------|-------------|----------|
| productId | integer | معرف المنتج المراد تبديل حالته في المفضلة | نعم (في المسار) |

### الاستجابة

في حالة الإضافة:

```json
{
    "status": "success",
    "message": "تمت إضافة المنتج إلى المفضلة بنجاح",
    "is_favorite": true
}
```

في حالة الحذف:

```json
{
    "status": "success",
    "message": "تم حذف المنتج من المفضلة بنجاح",
    "is_favorite": false
}
```

### رسائل الخطأ

```json
{
    "status": "error",
    "message": "المنتج غير موجود"
}
```

---

## التحقق من وجود منتج في المفضلة

التحقق مما إذا كان منتج معين موجودًا في قائمة المفضلة للمستخدم الحالي.

```
GET /api/favorites/check/{productId}
```

### المعلمات

| المعلمة | النوع | الوصف | المطلوب |
|---------|------|-------------|----------|
| productId | integer | معرف المنتج المراد التحقق منه | نعم (في المسار) |

### الاستجابة

```json
{
    "status": "success",
    "is_favorite": true
}
```

أو

```json
{
    "status": "success",
    "is_favorite": false
}
``` 